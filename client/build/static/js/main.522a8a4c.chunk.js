(this["webpackJsonppenn-spark-client"]=this["webpackJsonppenn-spark-client"]||[]).push([[0],{119:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(16),c=n.n(a),s=(n(119),n(7)),i=n(21),o=n(30),l=n(8),u=n(219),d=n(6),j=n(31),b=n(196),f=n(198),O=n(199),p=n(200),h=n(202),x=n(154),m=n(155),v=n(193),g=n(11),y=n(19),C=n(13),w=n(17),_=n.n(w),k="http://206.189.185.232/api/v1";function S(e){e?_.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete _.a.defaults.headers.common.Authorization}var N,D,A,R,U="network error",E="required username",F="required first name",I="required last name",T="required password",W="unauthorized",V="required user role name",P=function(e){e.loading=!0,e.error=void 0},z=function(e,t){e.loading=!1,e.error=t.payload},L=Object(C.b)("auth/loginUser",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.post("".concat(k,"/login"),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),q=Object(C.d)({name:"auth",initialState:{loadStatus:!1,isAuthenticated:!1,userData:null},reducers:{loadUserFromStorage:function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("userData");t&&n&&(S(t),e.userData=JSON.parse(n),e.isAuthenticated=!0),e.loadStatus=!0},updateUserData:function(e,t){e.userData=t.payload,localStorage.setItem("userData",JSON.stringify(t.payload))},logoutUser:function(e){e.isAuthenticated=!1,localStorage.removeItem("token"),S(!1),En.push("/login")}},extraReducers:(N={},Object(d.a)(N,L.pending,P),Object(d.a)(N,L.fulfilled,(function(e,t){e.loading=!1,e.isAuthenticated=!0,e.userData=t.payload.user_data,localStorage.setItem("token",t.payload.token),localStorage.setItem("userData",JSON.stringify(t.payload.user_data)),S(t.payload.token)})),Object(d.a)(N,L.rejected,z),N)}),G=q.reducer,B=q.actions,M=B.logoutUser,J=B.loadUserFromStorage,K=(B.updateUserData,n(203)),H=n(204),$=n(1),Q=Object(v.a)({card:{paddingTop:24},container:{flexGrow:1,margin:"0.5rem"}}),X=function(){var e=Q(),t=Object(l.b)(),n=Object(l.c)((function(e){return e.auth})),a=Object(r.useState)({username:"",password:""}),c=Object(s.a)(a,2),o=c[0],u=c[1],v=Object(r.useState)(!1),g=Object(s.a)(v,2),y=g[0],C=g[1],w=Object(r.useState)(!1),_=Object(s.a)(w,2),k=_[0],S=_[1],N=function(e){u(Object(j.a)(Object(j.a)({},o),{},Object(d.a)({},e.target.name,e.target.value)))},D=function(e){e.preventDefault(),y||C(!0),""===o.username||""===o.password||n.loading||t(L(o))},A=function(e){"Enter"===e.key&&D(e)};if(n.isAuthenticated)return Object($.jsx)(i.a,{to:"/"});var R=y&&""===o.username?E:"",U=y&&""===o.password?T:"";return""!==n.error&&("user not found"===n.error||n.error===E?R=n.error:n.error!==T&&"incorrect password"!==n.error||(U=n.error)),Object($.jsx)(b.a,{container:!0,direction:"column",alignItems:"center",className:e.card,children:Object($.jsx)(b.a,{item:!0,sm:2,children:Object($.jsx)(f.a,{elevation:6,children:Object($.jsx)(O.a,{children:Object($.jsxs)(b.a,{container:!0,alignItems:"center",direction:"column",className:e.container,spacing:3,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(p.a,{name:"username",placeholder:"username",value:o.username,onChange:N,onKeyPress:A,error:""!==R,helperText:R})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(p.a,{name:"password",placeholder:"password",type:k?"text":"password",value:o.password,onChange:N,onKeyPress:A,error:""!==U,helperText:U,InputProps:{endAdornment:Object($.jsx)(h.a,{position:"end",children:Object($.jsx)(x.a,{onClick:function(){return S(!k)},children:k?Object($.jsx)(K.a,{}):Object($.jsx)(H.a,{})})})}})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(m.a,{onClick:D,variant:"contained",children:"Login"})})]})})})})})},Y=n(217),Z=n(55),ee=n(213),te=n(104),ne=n.n(te),re=Object(C.c)({sortComparer:function(e,t){return e.id>t.id?-1:e.id<t.id?1:0}}),ae=re.getInitialState({function:"",updates:[]}),ce=Object(C.b)("folder/createFolder",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.post("".concat(k,"/folders"),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),se=Object(C.b)("folder/getFolder",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a,c,s,i,o;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,a=n.getState,c=n.rejectWithValue,e.prev=1,e.next=4,_.a.get("".concat(k,"/folders/").concat(t));case 4:return s=e.sent,i=a(),0===(o=s.data.parent_folder_id)||i.folders.ids.includes(o)||r(se(o)),s.data.child_folders.forEach((function(e){i.folders.ids.includes(e.id)||r(se(e.id))})),e.abrupt("return",s.data);case 12:if(e.prev=12,e.t0=e.catch(1),void 0!==e.t0.response){e.next=16;break}return e.abrupt("return",c(U));case 16:return e.abrupt("return",c(e.t0.response.data.error));case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),ie=Object(C.b)("folder/updateFolder",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.put("".concat(k,"/folders/").concat(t.id),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),oe=Object(C.b)("folder/deleteFolder",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.delete("".concat(k,"/folders/").concat(t.id));case 4:return e.abrupt("return",t);case 7:if(e.prev=7,e.t0=e.catch(1),void 0!==e.t0.response){e.next=11;break}return e.abrupt("return",r(U));case 11:return e.abrupt("return",r(e.t0.response.data.error));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),le=Object(C.b)("file/createFile",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a,c,s,i;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,a=t.data,c=n.rejectWithValue,e.prev=2,e.next=5,_.a.post("".concat(k,"/files"),r);case 5:return s=e.sent,(i=new FormData).append("file",a),e.next=10,_.a.put("".concat(k,"/file-data/").concat(s.data.id),i,{headers:{"Content-Type":"multipart/form-data"}});case 10:return e.abrupt("return",s.data);case 13:if(e.prev=13,e.t0=e.catch(2),void 0!==e.t0.response){e.next=17;break}return e.abrupt("return",c(U));case 17:return e.abrupt("return",c(e.t0.response.data.error));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}()),ue=Object(C.b)("file/getFile",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_()({method:"get",url:"".concat(k,"/file-data/").concat(t.id),responseType:"blob"});case 4:return a=e.sent,ne()(a.data,t.name),e.abrupt("return",null);case 9:if(e.prev=9,e.t0=e.catch(1),void 0!==e.t0.response){e.next=13;break}return e.abrupt("return",r(U));case 13:return e.abrupt("return",r(e.t0.response.data.error));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),de=Object(C.b)("file/updateFile",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,console.log(t),e.next=5,_.a.put("".concat(k,"/files/").concat(t.id),t);case 5:return a=e.sent,e.abrupt("return",a.data);case 9:if(e.prev=9,e.t0=e.catch(1),void 0!==e.t0.response){e.next=13;break}return e.abrupt("return",r(U));case 13:return e.abrupt("return",r(e.t0.response.data.error));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),je=Object(C.b)("file/deleteFile",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.delete("".concat(k,"/files/").concat(t.id));case 4:return e.abrupt("return",t);case 7:if(e.prev=7,e.t0=e.catch(1),void 0!==e.t0.response){e.next=11;break}return e.abrupt("return",r(U));case 11:return e.abrupt("return",r(e.t0.response.data.error));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),be=function(e,t){if(0!==e.updates.length){for(var n=Date.parse(t.updated_at),r=0,a=e.updates.length-1,c=parseInt((r+a)/2);r<a;){var s=Date.parse(e.updates[c].updated_at);if(n===s)break;n>s?a=c-1:r=c+1,c=parseInt((r+a)/2)}e.updates.splice(Date.parse(e.updates[c].updated_at)<n?c:c+1,0,t);for(var i=c;i<e.updates.length;i++)if(e.updates[i].id===t.id&&void 0===e.updates.files===t.files===void 0){e.updates.splice(i,1);break}}else e.updates.push(t)},fe=Object(C.d)({name:"folders",initialState:ae,reducers:{clearFolder:function(e){re.removeAll(e),e.error=null},updateFunction:function(e,t){e.function=t.payload},getFolder:se},extraReducers:(D={},Object(d.a)(D,ce.pending,P),Object(d.a)(D,ce.fulfilled,(function(e,t){e.loading=!1,re.upsertOne(e,t.payload),e.entities[t.payload.parent_folder_id].child_folders.push(t.payload)})),Object(d.a)(D,ce.rejected,z),Object(d.a)(D,se.pending,P),Object(d.a)(D,se.fulfilled,(function(e,t){e.loading=!1;var n=t.payload;re.upsertOne(e,n);var r=Date.now()-864e5;Date.parse(n.updated_at)>r&&be(e,n),n.files.forEach((function(t){Date.parse(t.updated_at)>r&&be(e,t)}))})),Object(d.a)(D,se.rejected,z),Object(d.a)(D,ie.pending,P),Object(d.a)(D,ie.fulfilled,(function(e,t){e.loading=!1;var n=t.payload.parent_folder_id;if(0!==n){var r=e.entities[n];r.child_folders=r.child_folders.filter((function(e){return e.id!==t.payload.id})),r.child_folders.push(t.payload);var a=e.entities[t.payload.id];void 0!==a&&(t.payload.child_folders=a.child_folders,t.payload.files=a.files,re.updateOne(e,t.payload))}})),Object(d.a)(D,ie.rejected,z),Object(d.a)(D,oe.pending,P),Object(d.a)(D,oe.fulfilled,(function(e,t){e.loading=!1;var n=e.entities[t.payload.parentFolderID];n.child_folders=n.child_folders.filter((function(e){return e.id!==t.payload.id})),re.removeOne(e,t.payload.id)})),Object(d.a)(D,oe.rejected,z),Object(d.a)(D,le.pending,P),Object(d.a)(D,le.fulfilled,(function(e,t){e.loading=!1;var n=e.entities[t.payload.folder_id];n.files.push(t.payload),re.updateOne(e,n)})),Object(d.a)(D,le.rejected,z),Object(d.a)(D,ue.pending,P),Object(d.a)(D,ue.fulfilled,(function(e){e.loading=!1})),Object(d.a)(D,ue.rejected,z),Object(d.a)(D,de.pending,P),Object(d.a)(D,de.fulfilled,(function(e,t){e.loading=!1;var n=t.payload.folder_id,r=e.entities[n];r.files=r.files.filter((function(e){return e.id!==t.payload.id})),r.files.push(t.payload)})),Object(d.a)(D,de.rejected,z),Object(d.a)(D,je.pending,P),Object(d.a)(D,je.fulfilled,(function(e,t){e.loading=!1;var n=e.entities[t.payload.folderID];n.files=n.files.filter((function(e){return e.id!==t.payload.id}))})),Object(d.a)(D,je.rejected,z),D)}),Oe=fe.actions,pe=Oe.clearFolder,he=Oe.updateFunction,xe=fe.reducer,me=re.getSelectors((function(e){return e.folders})).selectById,ve=n(209),ge=n(27),ye=n(156),Ce=n(205),we=n(208),_e=n(206),ke=n(207),Se=Object(C.c)({sortComparer:function(e,t){return e.id>t.id?-1:e.id<t.id?1:0}}),Ne=Se.getInitialState({loadedData:!1}),De=Object(C.b)("user/createUser",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.post("".concat(k,"/users"),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Ae=Object(C.b)("user/getUsers",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.get("".concat(k,"/users"));case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Re=Object(C.b)("user/getUser",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.get("".concat(k,"/users/").concat(t));case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Ue=Object(C.b)("user/updateUser",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.put("".concat(k,"/users/").concat(t.id),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Ee=Object(C.b)("user/deleteUser",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.delete("".concat(k,"/users/").concat(t));case 4:return e.abrupt("return",t);case 7:if(e.prev=7,e.t0=e.catch(1),void 0!==e.t0.response){e.next=11;break}return e.abrupt("return",r(U));case 11:return e.abrupt("return",r(e.t0.response.data.error));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),Fe=Object(C.b)("user/addUserRole",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a,c,s;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userID,a=t.userRole,c=n.rejectWithValue,e.prev=2,e.next=5,_.a.post("".concat(k,"/users/user-roles/").concat(r),a);case 5:return s=e.sent,e.abrupt("return",s.data);case 9:if(e.prev=9,e.t0=e.catch(2),void 0!==e.t0.response){e.next=13;break}return e.abrupt("return",c(U));case 13:return e.abrupt("return",c(e.t0.response.data.error));case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Ie=Object(C.b)("user/removeUserRole",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a,c,s;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userID,a=t.userRole,c=n.rejectWithValue,e.prev=2,e.next=5,_.a.delete("".concat(k,"/users/user-roles/").concat(r),{data:a});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:if(e.prev=9,e.t0=e.catch(2),void 0!==e.t0.response){e.next=13;break}return e.abrupt("return",c(U));case 13:return e.abrupt("return",c(e.t0.response.data.error));case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Te=Object(C.d)({name:"users",initialState:Ne,reducers:{clearUsers:function(e){Se.removeAll(e),e.error=null,e.loadedData=!1}},extraReducers:(A={},Object(d.a)(A,De.pending,P),Object(d.a)(A,De.fulfilled,(function(e,t){e.loading=!1,Se.upsertOne(e,t.payload)})),Object(d.a)(A,De.rejected,z),Object(d.a)(A,Ae.pending,P),Object(d.a)(A,Ae.fulfilled,(function(e,t){e.loading=!1,e.loadedData=!0,Se.upsertMany(e,t.payload)})),Object(d.a)(A,Ae.rejected,z),Object(d.a)(A,Re.pending,P),Object(d.a)(A,Re.fulfilled,(function(e,t){e.loading=!1,Se.upsertOne(e,t.payload)})),Object(d.a)(A,Re.rejected,z),Object(d.a)(A,Ue.pending,P),Object(d.a)(A,Ue.fulfilled,(function(e,t){e.loading=!1,Se.upsertOne(e,t.payload)})),Object(d.a)(A,Ue.rejected,z),Object(d.a)(A,Ee.pending,P),Object(d.a)(A,Ee.fulfilled,(function(e,t){e.loading=!1,Se.removeOne(e,t.payload)})),Object(d.a)(A,Ee.rejected,z),Object(d.a)(A,Fe.pending,P),Object(d.a)(A,Fe.fulfilled,(function(e,t){e.loading=!1,Se.upsertOne(e,t.payload)})),Object(d.a)(A,Fe.rejected,z),Object(d.a)(A,Ie.pending,P),Object(d.a)(A,Ie.fulfilled,(function(e,t){e.loading=!1,Se.upsertOne(e,t.payload)})),Object(d.a)(A,Ie.rejected,z),A)}),We=Te.actions.clearUsers,Ve=Te.reducer,Pe=Se.getSelectors((function(e){return e.users})).selectById,ze=Object(v.a)({listItem:{padding:"0.5rem"}}),Le=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],qe=function(e){var t=new Date(Date.parse(e)),n=t.getMinutes();return Le[t.getDay()]+" "+t.getHours()+":"+(n>9?n:"0"+n)},Ge=function(e){var t=e.update,n=Object(l.b)(),a=ze(),c=Object(l.c)((function(e){return Pe(e,t.last_editor_id)})),s=Object(l.c)((function(e){return e.users}));return Object(r.useEffect)((function(){c||s.loading||n(Re(t.last_editor_id))}),[c,s]),Object($.jsxs)(ye.a,{button:!0,component:ge.b,to:"/folders/"+(void 0!==t.access_roles?t.id:t.folder_id),children:[Object($.jsx)(Ce.a,{children:void 0!==t.access_roles?Object($.jsx)(_e.a,{}):Object($.jsx)(ke.a,{})}),Object($.jsx)(we.a,{className:a.listItem,children:t.name}),Object($.jsxs)(we.a,{className:a.listItem,children:["Updated By ",c?c.username:""," On ",qe(t.updated_at)]})]},t.id)},Be=Object(v.a)({card:{width:"100%",verticalAlign:"middle",display:"inline-flex"},button:{fontSize:"1.25rem",textTransform:"none"},cardActions:{float:"left"},cardContent:{display:"flex",flexGrow:1,width:"auto",paddingLeft:"1.25rem"},cardWithParentContent:{display:"flex",flexGrow:1,width:"auto",paddingLeft:0},parentFolderActions:{paddingRight:0}}),Me=function(e){var t=e.id,n=e.showUser,a=Be(),c=Object(l.b)(),i=Object(l.c)((function(e){return e.folders})),o=Object(r.useState)([]),u=Object(s.a)(o,2),d=u[0],j=u[1];Object(r.useEffect)((function(){if(!i.loading){for(var e=t,n=[];0!==e;){if(!i.ids.includes(e))return void c(se(e));n.push(i.entities[e]),e=i.entities[e].parent_folder_id}j(n)}}),[t,i]);var b=Object(r.useState)(null),p=Object(s.a)(b,2),h=p[0],x=p[1],v=Object(l.c)((function(e){return e.users}));return Object(r.useEffect)((function(){console.log(d[0]),h||v.loading||!d[0]||(v.ids.includes(d[0].last_editor_id)?x(v.entities[d[0].last_editor_id]):c(Re(d[0].last_editor_id)))}),[h,d,v]),i.loading||0===d.length?"":Object($.jsxs)(f.a,{square:!0,elevation:6,className:a.card,children:[Object($.jsx)(O.a,{className:a.cardContent,children:function(){for(var e=[],t=0;t<(d.length>3?2:3)&&!(t>=d.length);t++)0!==t&&e.push(Object($.jsx)(Z.a,{variant:"h6",children:"/"})),e.push(Object($.jsx)(m.a,{className:a.button,component:ge.b,to:"/folders/"+d[t].id,disabled:0===t,style:{color:"black"},children:d[t].name}));return d.length>3&&(e.push(Object($.jsx)(Z.a,{variant:"h6",children:"/ ... /"})),e.push(Object($.jsx)(m.a,{className:a.button,component:ge.b,to:"/folders/"+d[d.length-1].id,children:d[d.length-1].name}))),e.reverse()}()}),Object($.jsx)(O.a,{className:a.cardActions,children:Object($.jsxs)(m.a,{className:a.button,onClick:function(){return n(h)},children:["Last Edited By ",h?h.username:""," On ",qe(d[0].updated_at)]})}),Object($.jsx)(O.a,{className:a.cardActions,children:Object($.jsxs)(ve.a,{children:[Object($.jsx)(m.a,{className:a.button,onClick:function(){c(he({type:"create",folder:!0,id:d[0].id}))},children:"Create Child Folder"}),Object($.jsx)(m.a,{className:a.button,onClick:function(){c(he({type:"create",folder:!1,id:d[0].id}))},children:"Upload File"}),Object($.jsx)(m.a,{className:a.button,onClick:function(){c(he({type:"edit",folder:!0,entity:d[0].id}))},children:"Edit Folder"}),1!==t?Object($.jsx)(m.a,{className:a.button,onClick:function(){c(he({type:"delete",folder:!0,ids:{id:d[0].id,parentFolderID:d[0].id.parent_folder_id}}))},children:"Delete Folder"}):""]})})]})},Je=n(210),Ke=Object(v.a)({card:{verticalAlign:"middle",display:"inline-flex",width:"100%"},cardActionArea:{paddingLeft:"2ch",display:"flex",flexGrow:1,width:"auto"},cardActions:{float:"left"},button:{textTransform:"none",fontSize:"1.25rem",width:"100%",whiteSpace:"nowrap"},typography:{fontSize:"1.25rem"}}),He=function(e){var t=e.folder,n=e.data,a=e.showUser,c=Object(l.b)(),s=Ke(),i=Object(l.c)((function(e){return e.folders})),o=Object(l.c)((function(e){return Pe(e,n.last_editor_id)})),u=Object(l.c)((function(e){return e.users}));return Object(r.useEffect)((function(){o||u.loading||c(Re(n.last_editor_id))}),[o,n]),Object($.jsxs)(f.a,{variant:"outlined",square:!0,className:s.card,children:[Object($.jsx)(Je.a,{className:s.cardActionArea,component:t?ge.b:void 0,to:t?"/folders/"+n.id:void 0,onClick:t?void 0:function(){c(ue(n))},children:Object($.jsxs)(b.a,{container:!0,spacing:2,className:s.grid,children:[Object($.jsx)(b.a,{item:!0,children:t?Object($.jsx)(_e.a,{}):n.is_published?Object($.jsx)(ke.a,{}):Object($.jsx)(H.a,{})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(Z.a,{className:s.typography,children:n.name})})]})}),Object($.jsx)(O.a,{className:s.cardActions,children:Object($.jsxs)(m.a,{className:s.button,onClick:function(){return a(o)},children:["Last Edited By ",o?o.username:""," On ",qe(n.updated_at)]})}),Object($.jsx)(O.a,{className:s.cardActions,children:Object($.jsxs)(ve.a,{children:[t||4!==i.entities[n.folder_id].access_level?"":Object($.jsxs)(m.a,{className:s.button,onClick:function(){t||4!==i.entities[n.folder_id].access_level||c(de({id:n.id,is_published:!n.is_published}))},children:[n.is_published?"Unp":"P","ublish File"]}),Object($.jsxs)(m.a,{className:s.button,onClick:function(){c(he(t?{type:"edit",folder:!0,entity:n}:{type:"edit",folder:!1,entity:n}))},children:["Edit ",t?"Folder":"File"]}),Object($.jsxs)(m.a,{className:s.button,onClick:function(){c(he(t?{type:"delete",folder:!0,ids:{id:n.id,parentFolderID:n.parent_folder_id}}:{type:"delete",folder:!1,ids:{id:n.id,folderID:n.folder_id}}))},children:["Delete ",t?"Folder":"File"]})]})})]})},$e=n(211),Qe=n(212),Xe=n(214),Ye=Object(v.a)({dialogActions:{justifyContent:"center"}}),Ze=function(){var e=Object(l.b)(),t=Ye(),n=Object(l.c)((function(e){return e.folders})),a=Object(r.useState)(!1),c=Object(s.a)(a,2),i=c[0],o=c[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),j=d[0],b=d[1],f=Object(r.useState)(""),O=Object(s.a)(f,2),h=O[0],x=O[1],v=Object(r.useState)(""),g=Object(s.a)(v,2),y=g[0],C=g[1],w=Object(r.useState)(null),_=Object(s.a)(w,2),k=_[0],S=_[1],N=function(){e(he(null)),o(!1)};Object(r.useEffect)((function(){i||null===n.function||"create"!==n.function.type&&"edit"!==n.function.type||("edit"===n.function.type?x(n.function.entity.name):x(""),o(!0),C(""))}),[n]),Object(r.useEffect)((function(){i&&j&&!n.loading&&(b(!1),n.error?C(n.error):N())}));return Object($.jsxs)($e.a,{open:i,onClose:N,children:[Object($.jsxs)(Qe.a,{children:[j?Object($.jsx)(ee.a,{}):"",Object($.jsx)(p.a,{autoFocus:!0,label:"Name",type:"text",error:""!==y,helperText:y,value:h,onChange:function(e){e.preventDefault(),x(e.target.value)}})]}),null===n.function||n.function.folder||"create"!==n.function.type?"":Object($.jsx)(Xe.a,{children:Object($.jsx)("input",{type:"file",onChange:function(e){S(e.target.files[0]),x(e.target.files[0].name)}})}),Object($.jsxs)(Xe.a,{className:t.dialogActions,children:[Object($.jsx)(m.a,{onClick:function(){if(i&&null!==n.function)if(""!==h)if(void 0===n.function.entity||h!==n.function.entity.name){if(b(!0),"create"===n.function.type)return n.function.folder?void e(ce({name:h,parent_folder_id:n.function.id})):null===k?(C("required file"),void b(!1)):void e(le({file:{name:h,folder_id:n.function.id},data:k}));n.function.folder?e(ie({id:n.function.entity.id,name:h})):e(de({id:n.function.entity.id,name:h}))}else C("no changes to name");else C("required folder name")},disabled:j,children:"Save"}),Object($.jsx)(m.a,{onClick:N,color:"secondary",children:"Cancel"})]})]})},et=n(215),tt=n(216),nt=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.folders})),n=Object(r.useState)(!1),a=Object(s.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(!1),u=Object(s.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(""),f=Object(s.a)(b,2),O=f[0],p=f[1],h=function(){e(he(null)),i(!1)};return Object(r.useEffect)((function(){c||null===t.function||"delete"!==t.function.type||(i(!0),p(""))}),[t]),Object(r.useEffect)((function(){c&&d&&!t.loading&&(j(!1),t.error?p(t.error):h())}),[t]),Object($.jsxs)($e.a,{open:c,onClose:h,children:[Object($.jsxs)(Qe.a,{children:[d?Object($.jsx)(ee.a,{}):"",Object($.jsxs)(et.a,{children:["Are you sure you want to delete this ",null===t.function||t.function.folder?"folder":"file","?"]}),O?Object($.jsx)(tt.a,{children:O}):""]}),Object($.jsxs)(Xe.a,{children:[Object($.jsxs)(m.a,{onClick:function(){j(!0),t.function.folder?e(oe(t.function.ids)):e(je(t.function.ids))},children:["Delete ",null===t.function||t.function.folder?"Folder":"File"]}),Object($.jsx)(m.a,{onClick:h,color:"secondary",children:"Cancel"})]})]})},rt=Object(v.a)({textField:{"& .MuiInputBase-root.Mui-disabled":{color:"black"}}}),at=function(e){var t=e.userData,n=rt();return Object($.jsxs)(b.a,{container:!0,alignItems:"center",direction:"column",spacing:3,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(p.a,{type:"text",label:"username",disabled:!0,value:t.username,className:n.textField})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(p.a,{type:"text",label:"first name",disabled:!0,value:t.first_name,className:n.textField})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(p.a,{type:"text",label:"last name",disabled:!0,value:t.last_name,className:n.textField})})]})},ct=Object(v.a)({dialogContent:{overflow:"clip"}}),st=function(e){var t=e.open,n=e.onClose,r=e.userData,a=ct();return Object($.jsxs)($e.a,{open:t,onClose:n,children:[Object($.jsx)(Qe.a,{className:a.dialogContent,children:Object($.jsx)(at,{userData:r})}),Object($.jsx)(Xe.a,{children:Object($.jsx)(m.a,{color:"secondary",onClick:n,children:"Close"})})]})},it=Object(v.a)({grid:{padding:"2rem"}}),ot=function(){var e=it(),t=Object(i.g)().id;t=parseInt(t);var n=Object(l.c)((function(e){return e.folders})),a=Object(l.c)((function(e){return me(e,t)})),c=Object(l.b)();Object(r.useEffect)((function(){n.ids.includes(t)||n.loading||n.error||c(se(t))}),[t,n]);var o=Object(r.useState)(!1),u=Object(s.a)(o,2),d=u[0],j=u[1],O=Object(r.useState)({username:"",first_name:"",last_name:""}),p=Object(s.a)(O,2),h=p[0],x=p[1],m=function(e){x(e),j(!0)},v=function(e,t){return t.name>e.name?-1:t.name<e.name?1:0},g=function(){return Object($.jsxs)("div",{children:[a.child_folders.slice().sort(v).map((function(e){return Object($.jsx)(He,{data:e,folder:!0,showUser:m},e.id)})),a.files.slice().sort(v).map((function(e){return Object($.jsx)(He,{data:e,showUser:m},e.id)}))]})},y="forbidden"===n.error?"User forbidden":n.loading||void 0!==a?"":"Could not find folder, please check your connection...";return""!==y?Object($.jsx)(f.a,{children:Object($.jsx)(Y.a,{children:Object($.jsx)(b.a,{container:!0,justify:"center",children:Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(Z.a,{variant:"h3",children:y})})})})}):Object($.jsxs)("div",{children:[Object($.jsx)(Ze,{}),Object($.jsx)(nt,{}),Object($.jsx)(st,{open:d,onClose:function(){return j(!1)},userData:h}),Object($.jsx)(Me,{id:t,showUser:m}),n.loading?Object($.jsx)(ee.a,{}):0!==a.child_folders.length||0!==a.files.length||n.loading?g():Object($.jsx)(b.a,{container:!0,direction:"column",alignItems:"center",className:e.grid,children:Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(f.a,{children:Object($.jsx)(Y.a,{children:Object($.jsx)(Z.a,{variant:"h3",children:"No files or child folders present."})})})})})]})},lt=n(218),ut=n(220),dt=function(e){var t=e.toggleNavDrawer;return Object($.jsx)("div",{children:Object($.jsx)(lt.a,{position:"fixed",style:{zIndex:1251},children:Object($.jsxs)(u.a,{children:[Object($.jsx)(x.a,{edge:"start",color:"inherit",onClick:t,children:Object($.jsx)(ut.a,{})}),Object($.jsx)(Z.a,{variant:"h6",color:"inherit",children:"Penn SPARK Document Management Service"})]})})})},jt=n(236),bt=n(201),ft=n(58),Ot=n.n(ft),pt=n(105),ht=n.n(pt),xt=n(221),mt=n(222),vt=function(e){var t=e.open,n=e.onClose,r=Object(l.b)(),a=Object(l.c)((function(e){return e.auth}));return Object($.jsx)("div",{children:Object($.jsxs)(jt.a,{anchor:"left",open:t,onClose:n,style:{zIndex:1250},children:[Object($.jsx)(u.a,{}),Object($.jsxs)(bt.a,{children:[Object($.jsxs)(ye.a,{button:!0,component:ge.b,to:"/",onClick:n,children:[Object($.jsx)(Ce.a,{children:Object($.jsx)(xt.a,{})}),Object($.jsx)(we.a,{primary:"Dashboard"})]},"Dashboard"),Object($.jsxs)(ye.a,{button:!0,component:ge.b,to:"/folders/1",onClick:n,children:[Object($.jsx)(Ce.a,{children:Object($.jsx)(_e.a,{})}),Object($.jsx)(we.a,{primary:"Filesystem"})]},"Filesystem"),a.isAuthenticated&&a.userData.is_admin?Object($.jsxs)("div",{children:[Object($.jsxs)(ye.a,{button:!0,component:ge.b,to:"/users",onClick:n,children:[Object($.jsx)(Ce.a,{children:Object($.jsx)(ht.a,{})}),Object($.jsx)(we.a,{primary:"Manage Users"})]},"Manage Users"),Object($.jsxs)(ye.a,{button:!0,component:ge.b,to:"/user-roles",onClick:n,children:[Object($.jsx)(Ce.a,{children:Object($.jsx)(Ot.a,{})}),Object($.jsx)(we.a,{primary:"Manage User Roles"})]},"Manage User Roles")]}):"",Object($.jsxs)(ye.a,{button:!0,onClick:function(){r(M()),r(pe()),r(We()),n()},children:[Object($.jsx)(Ce.a,{children:Object($.jsx)(mt.a,{})}),Object($.jsx)(we.a,{primary:"Logout"})]},"Logout")]})]})})},gt=n(3),yt=["component"],Ct=function(e){var t=e.component,n=Object(gt.a)(e,yt),r=Object(l.c)((function(e){return e.auth}));return Object($.jsx)(i.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return r.loadStatus?r.isAuthenticated?Object($.jsx)(t,Object(j.a)({},e)):Object($.jsx)(i.a,{to:"/login"}):""}}))},wt=n(228),_t=n(229),kt=n(230),St=n(231),Nt=n(232),Dt=n(152),At=n(163),Rt=n(159),Ut=n(227),Et=Object(v.a)({card:{width:"100%",verticalAlign:"middle",justifyContent:"center",display:"inline-flex"},button:{fontSize:"1.25rem",textTransform:"none"}}),Ft=function(e){var t=e.openEditDialog,n=Et();return Object($.jsx)(f.a,{square:!0,className:n.card,children:Object($.jsx)(O.a,{children:Object($.jsx)(ve.a,{children:Object($.jsx)(m.a,{className:n.button,onClick:function(){return t(!0)},children:"Create New User"})})})})},It=n(234),Tt=Object(v.a)({dialogActions:{justifyContent:"center"},grid:{paddingTop:"1rem"},dialogContent:{overflow:"visible"},dialogContentText:{marginTop:"0.5rem",marginBottom:"0"}}),Wt=function(e){var t=e.open,n=e.onClose,a=e.create,c=e.userData,i=Object(l.b)(),o=Tt(),u=Object(r.useState)({}),f=Object(s.a)(u,2),O=f[0],h=f[1];Object(r.useEffect)((function(){t&&h(a?{username:"",first_name:"",last_name:"",password:"",is_admin:!1}:{id:c.id,username:c.username,first_name:c.first_name,last_name:c.last_name,is_admin:c.is_admin})}),[t]);var x=Object(r.useState)(""),v=Object(s.a)(x,2),g=v[0],y=v[1],C=function(e,t){h(Object(j.a)(Object(j.a)({},O),{},Object(d.a)({},e,t)))},w=function(e){return"first_name"===e?g===F?g:"":"last_name"===e?g===I?g:"":"password"===e?g===T?g:"":g===F||g===I||g===T?"":g},_=Object(l.c)((function(e){return e.users})),k=Object(r.useState)(!1),S=Object(s.a)(k,2),N=S[0],D=S[1];return Object(r.useEffect)((function(){N&&!_.loading&&(D(!1),_.error?y(_.error):n())}),[_]),Object($.jsxs)($e.a,{open:t,onClose:n,children:[Object($.jsxs)(Qe.a,{className:o.dialogContent,children:[N?Object($.jsx)(ee.a,{}):"",Object($.jsx)(b.a,{container:!0,direction:"column",children:Object.keys(O).map((function(e){return"id"===e?"":Object($.jsx)(b.a,{item:!0,children:"is_admin"===e?Object($.jsxs)(b.a,{container:!0,className:o.grid,spacing:4,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(tt.a,{className:o.dialogContentText,children:"admin"})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(It.a,{checked:O.is_admin,onChange:function(){return C("is_admin",!O.is_admin)}})})]}):Object($.jsx)(p.a,{label:e.replace("_"," "),type:"password"===e?"password":"text",value:O[e],onChange:function(t){return C(e,t.target.value)},helperText:w(e),error:""!==w(e)})},e)}))})]}),Object($.jsxs)(Xe.a,{className:o.dialogActions,children:[Object($.jsxs)(m.a,{onClick:function(){""!==O.username?""!==O.first_name?""!==O.last_name?""!==O.password?(D(!0),i(a?De(O):Ue(O))):y(T):y(I):y(F):y(E)},children:[a?"Create":"Edit"," User"]}),Object($.jsx)(m.a,{color:"secondary",onClick:n,children:"Cancel"})]})]})},Vt=n(235),Pt=n(223),zt=n(226),Lt=Object(v.a)({card:{verticalAlign:"middle",display:"inline-flex",width:"100%"},cardActionArea:{paddingLeft:"2ch",display:"flex",flexGrow:1,width:"auto"},cardActions:{float:"left"},button:{textTransform:"none",fontSize:"1.25rem",width:"100%",whiteSpace:"nowrap"},typography:{fontSize:"1.25rem"}}),qt=function(e){var t=e.userRoleData,n=e.userData,r=Lt(),a=Object(l.b)();return Object($.jsx)(b.a,{item:!0,children:Object($.jsxs)(f.a,{variant:"outlined",square:!0,className:r.card,children:[Object($.jsx)(Y.a,{className:r.cardActionArea,children:Object($.jsxs)(b.a,{container:!0,spacing:2,className:r.grid,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(Ot.a,{})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(Z.a,{className:r.typography,children:t.name})})]})}),Object($.jsx)(O.a,{className:r.cardActions,children:Object($.jsx)(ve.a,{children:Object($.jsx)(m.a,{className:r.button,onClick:function(){a(Ie({userID:n.id,userRole:t}))},children:"Remove User Role"})})})]})})},Gt=n(224),Bt=n(225),Mt=Object(v.a)({grid:{display:"flex",flexGrow:1,width:"auto",paddingLeft:"1.25rem",paddingTop:"0.5rem"},buttonGroup:{float:"left"},button:{fontSize:"1.25rem",textTransform:"none"},typography:{fontSize:"1.25rem"}}),Jt=function(e){var t=e.userData,n=e.openAdd,r=e.openEdit,a=e.openPassword,c=e.openDelete,s=Mt(),i=Object(l.c)((function(e){return e.auth}));return Object($.jsxs)(Vt.a,{square:!0,children:[Object($.jsxs)(Pt.a,{children:[Object($.jsxs)(b.a,{container:!0,spacing:2,className:s.grid,children:[Object($.jsx)(b.a,{item:!0,children:t.is_admin?Object($.jsx)(Gt.a,{}):Object($.jsx)(Bt.a,{})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsxs)(Z.a,{className:s.typography,children:[t.username," (",t.first_name," ",t.last_name,")"]})})]}),Object($.jsxs)(ve.a,{className:s.buttonGroup,children:[Object($.jsx)(m.a,{className:s.button,onClick:function(e){e.stopPropagation(),n(t)},children:"Add User Role"}),Object($.jsx)(m.a,{className:s.button,onClick:function(e){e.stopPropagation(),r(!1,t)},children:"Edit User"}),Object($.jsx)(m.a,{className:s.button,onClick:function(e){e.stopPropagation(),a(!1,t)},children:"Change Password"}),1===t.id||t.id===i.userData.id?"":Object($.jsx)(m.a,{className:s.button,onClick:function(e){e.stopPropagation(),c(t)},children:"Delete User"})]})]}),Object($.jsx)(zt.a,{children:Object($.jsx)(b.a,{container:!0,direction:"column",children:t.user_roles.map((function(e){return Object($.jsx)(qt,{userRoleData:e,userData:t},e.id)}))})})]})},Kt=Object(v.a)({dialogActions:{justifyContent:"center"}}),Ht=function(e){var t=e.open,n=e.onClose,a=e.id,c=Object(l.b)(),i=Kt(),o=Object(l.c)((function(e){return e.users})),u=Object(r.useState)(!1),d=Object(s.a)(u,2),j=d[0],f=d[1],O=Object(r.useState)(""),h=Object(s.a)(O,2),x=h[0],v=h[1],g=Object(r.useState)(""),y=Object(s.a)(g,2),C=y[0],w=y[1],_=Object(r.useState)(""),k=Object(s.a)(_,2),S=k[0],N=k[1],D=Object(r.useState)(""),A=Object(s.a)(D,2),R=A[0],U=A[1];return Object(r.useEffect)((function(){j&&!o.loading&&(f(!1),o.error?N(o.error):n())}),[o,j]),Object($.jsxs)($e.a,{open:t,onClose:n,children:[Object($.jsxs)(Qe.a,{children:[j?Object($.jsx)(ee.a,{}):"",Object($.jsxs)(b.a,{container:!0,direction:"column",spacing:2,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(p.a,{autoFocus:!0,label:"new password",type:"password",error:""!==S,helperText:S,value:x,onChange:function(e){return v(e.target.value)}})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(p.a,{label:"confirm password",type:"password",error:""!==R,helperText:R,value:C,onChange:function(e){return w(e.target.value)}})})]})]}),Object($.jsxs)(Xe.a,{className:i.dialogActions,children:[Object($.jsx)(m.a,{onClick:function(e){e.preventDefault(),""!==x?(N(""),x===C?(U(""),f(!0),c(Ue({id:a,is_admin:!0,password:x}))):U("passwords do not match")):N(T)},disabled:j,children:"Save"}),Object($.jsx)(m.a,{onClick:n,color:"secondary",children:"Cancel"})]})]})},$t=function(e){var t=e.open,n=e.onClose,a=e.id,c=Object(l.b)(),i=Object(l.c)((function(e){return e.users})),o=Object(r.useState)(!1),u=Object(s.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(""),f=Object(s.a)(b,2),O=f[0],p=f[1];return Object(r.useEffect)((function(){d&&!i.loading&&(j(!1),i.error?p(i.error):n())}),[i]),Object($.jsxs)($e.a,{open:t,onClose:n,children:[Object($.jsxs)(Qe.a,{children:[d?Object($.jsx)(ee.a,{}):"",Object($.jsx)(et.a,{children:"Are you sure you want to delete this user?"}),O?Object($.jsx)(tt.a,{children:O}):""]}),Object($.jsxs)(Xe.a,{children:[Object($.jsx)(m.a,{onClick:function(){j(!0),console.log(a),c(Ee(a))},children:"Delete User"}),Object($.jsx)(m.a,{onClick:n,color:"secondary",children:"Cancel"})]})]})},Qt=n(153),Xt=Object(C.c)({sortComparer:function(e,t){return e.id>t.id?-1:e.id<t.id?1:0}}),Yt=Xt.getInitialState({loadedData:!1}),Zt=Object(C.b)("userRole/createUser",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.post("".concat(k,"/user-roles"),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),en=Object(C.b)("userRole/getUserRoles",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.get("".concat(k,"/user-roles"));case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),tn=Object(C.b)("userRole/updateUserRole",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.put("".concat(k,"/user-roles/").concat(t.id),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),nn=Object(C.b)("userRole/deleteUserRole",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.delete("".concat(k,"/user-roles/").concat(t));case 4:return e.abrupt("return",t);case 7:if(e.prev=7,e.t0=e.catch(1),void 0!==e.t0.response){e.next=11;break}return e.abrupt("return",r(U));case 11:return e.abrupt("return",r(e.t0.response.data.error));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),rn=Object(C.b)("userRole/addAccessRole",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.post("".concat(k,"/access-roles"),t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),void 0!==e.t0.response){e.next=12;break}return e.abrupt("return",r(U));case 12:return e.abrupt("return",r(e.t0.response.data.error));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),an=Object(C.b)("userRole/removeAccessRole",function(){var e=Object(y.a)(Object(g.a)().mark((function e(t,n){var r;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,_.a.delete("".concat(k,"/access-roles/").concat(t.id));case 4:return e.abrupt("return",t);case 7:if(e.prev=7,e.t0=e.catch(1),void 0!==e.t0.response){e.next=11;break}return e.abrupt("return",r(U));case 11:return e.abrupt("return",r(e.t0.response.data.error));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),cn=Object(C.d)({name:"userRoles",initialState:Yt,reducers:{clearUserRoles:function(e){Xt.removeAll(e),e.error=null,e.loadedData=!1}},extraReducers:(R={},Object(d.a)(R,Zt.pending,P),Object(d.a)(R,Zt.fulfilled,(function(e,t){e.loading=!1,Xt.upsertOne(e,t.payload)})),Object(d.a)(R,Zt.rejected,z),Object(d.a)(R,en.pending,P),Object(d.a)(R,en.fulfilled,(function(e,t){e.loading=!1,e.loadedData=!0,Xt.upsertMany(e,t.payload)})),Object(d.a)(R,en.rejected,z),Object(d.a)(R,tn.pending,P),Object(d.a)(R,tn.fulfilled,(function(e,t){e.loading=!1,Xt.upsertOne(e,t.payload)})),Object(d.a)(R,tn.rejected,z),Object(d.a)(R,nn.pending,P),Object(d.a)(R,nn.fulfilled,(function(e,t){e.loading=!1,Xt.removeOne(e,t.payload)})),Object(d.a)(R,nn.rejected,z),Object(d.a)(R,rn.pending,P),Object(d.a)(R,rn.fulfilled,(function(e,t){e.loading=!1,e.entities[t.payload.user_role_id].access_roles.push(t.payload)})),Object(d.a)(R,rn.rejected,z),Object(d.a)(R,an.pending,P),Object(d.a)(R,an.fulfilled,(function(e,t){e.loading=!1;var n=e.entities[t.payload.user_role_id];n.access_roles=n.access_roles.filter((function(e){return e.id!==t.payload.id}))})),Object(d.a)(R,an.rejected,z),R)}),sn=cn.actions.clearUserRoles,on=cn.reducer,ln=(Xt.getSelectors((function(e){return e.userRoles})).selectById,Object(v.a)({formControl:{minWidth:150},dialogActions:{justifyContent:"center"}})),un=function(e){var t=e.open,n=e.onClose,a=e.userData,c=Object(l.b)(),i=ln(),o=Object(l.c)((function(e){return e.users})),u=Object(l.c)((function(e){return e.userRoles})),d=Object(r.useState)(!1),j=Object(s.a)(d,2),b=j[0],f=j[1];Object(r.useEffect)((function(){u.loadedData||u.loading||(b?f(!1):(f(!0),c(en(null))))}),[u,b]);var O=Object(r.useState)(""),p=Object(s.a)(O,2),h=p[0],x=p[1],v=Object(r.useState)(""),g=Object(s.a)(v,2),y=g[0],C=g[1];return Object(r.useEffect)((function(){b&&!o.loading&&(f(!1),o.error?C(o.error):n())})),Object(r.useEffect)((function(){C("")}),[t]),Object($.jsxs)($e.a,{open:t,onClose:n,children:[b?Object($.jsx)(Qe.a,{children:Object($.jsx)(ee.a,{})}):"",Object($.jsx)(Xe.a,{className:i.dialogActions,children:Object($.jsxs)(Dt.a,{className:i.formControl,children:[Object($.jsx)(At.a,{children:"User Role"}),Object($.jsx)(Rt.a,{value:h,onChange:function(e){return x(e.target.value)},error:""!==y,children:Object.values(u.entities).map((function(e){return Object($.jsx)(Ut.a,{value:e.id,children:e.name},e.id)}))}),y?Object($.jsx)(Qt.a,{children:y}):""]})}),Object($.jsxs)(Xe.a,{children:[Object($.jsx)(m.a,{onClick:function(){null!==h?a.user_roles.filter((function(e){return e.id===h})).length>0?C("user already has user role"):(f(!0),c(Fe({userID:a.id,userRole:{id:h}}))):C(V)},children:"Add User Role"}),Object($.jsx)(m.a,{color:"secondary",onClick:n,children:"Cancel"})]})]})},dn=[{field:"username",headerName:"username",width:150},{field:"first_name",headerName:"first name",width:150},{field:"last_name",headerName:"last name",width:150},{field:"is_admin",headerName:"admin",width:150}],jn=Object(v.a)({div:{width:"100%",height:"100%",position:"fixed"},select:{minWidth:150}}),bn=function(){var e=Object(l.b)(),t=jn(),n=Object(l.c)((function(e){return e.users})),a=Object(r.useState)(!1),c=Object(s.a)(a,2),i=c[0],o=c[1],u=Object(r.useState)({}),d=Object(s.a)(u,2),b=d[0],f=d[1],O=Object(r.useState)([]),h=Object(s.a)(O,2),x=h[0],m=h[1],v=function(e,t){var n=Object(j.a)({},b);""===t?delete n[e]:n[e]=t.toString(),f(n)};Object(r.useEffect)((function(){m(Object.values(n.entities).filter((function(e){for(var t=0,n=Object.entries(b);t<n.length;t++){var r=Object(s.a)(n[t],2),a=r[0],c=r[1];if(!e[a].toString().toLowerCase().includes(c))return!1}return!0})))}),[n,b]),Object(r.useEffect)((function(){i?n.loadedData&&o(!1):n.loadedData||(o(!0),e(Ae(null)))}),[n]);var g=Object(r.useState)(!1),y=Object(s.a)(g,2),C=y[0],w=y[1],_=Object(r.useState)(!1),k=Object(s.a)(_,2),S=k[0],N=k[1],D=Object(r.useState)(null),A=Object(s.a)(D,2),R=A[0],U=A[1],E=function(e,t){N(e),w(!0),e||U(t)},F=Object(r.useState)(!1),I=Object(s.a)(F,2),T=I[0],W=I[1],V=function(e){U(e),W(!0)},P=Object(r.useState)(!1),z=Object(s.a)(P,2),L=z[0],q=z[1],G=function(e){U(e),q(!0)},B=Object(r.useState)(!1),M=Object(s.a)(B,2),J=M[0],K=M[1],H=function(e){U(e),K(!0)};return Object($.jsxs)("div",{className:t.div,children:[Object($.jsx)(Wt,{open:C,onClose:function(){return w(!1)},create:S,userData:R}),Object($.jsx)(Ht,{open:T,onClose:function(){return W(!1)},id:R?R.id:0}),Object($.jsx)($t,{open:L,onClose:function(){return q(!1)},id:R?R.id:0}),Object($.jsx)(un,{open:J,onClose:function(){return K(!1)},userData:R}),i?Object($.jsx)(ee.a,{}):"",Object($.jsx)(Ft,{openEditDialog:E}),Object($.jsx)(wt.a,{children:Object($.jsx)(_t.a,{children:Object($.jsx)(kt.a,{children:Object($.jsx)(St.a,{children:dn.map((function(e){return Object($.jsx)(Nt.a,{align:"center",children:"is_admin"===e.field?Object($.jsxs)(Dt.a,{children:[Object($.jsx)(At.a,{children:"Admin"}),Object($.jsxs)(Rt.a,{className:t.select,onChange:function(t){return v(e.field,t.target.value)},children:[Object($.jsx)(Ut.a,{value:"",children:"all"}),Object($.jsx)(Ut.a,{value:"true",children:"true"}),Object($.jsx)(Ut.a,{value:"false",children:"false"})]})]}):Object($.jsx)(p.a,{label:"search by "+e.headerName,onChange:function(t){return v(e.field,t.target.value.toLowerCase())}})},e.field)}))})})})}),x.map((function(e){return Object($.jsx)(Jt,{userData:e,openEdit:E,openPassword:V,openDelete:G,openAdd:H},e.id)}))]})},fn=Object(v.a)({card:{width:"100%",justifyContent:"left",display:"inline-flex"},cardContent:{display:"flex",flexGrow:1,width:"auto",paddingLeft:"1.25rem"},cardActions:{float:"left"},button:{fontSize:"1.25rem",textTransform:"none"}}),On=function(e){var t=e.searchTerm,n=e.setSearchTerm,r=e.openEdit,a=fn();return Object($.jsx)("div",{children:Object($.jsxs)(f.a,{square:!0,className:a.card,children:[Object($.jsx)(Y.a,{className:a.cardContent,children:Object($.jsx)(p.a,{label:"user role search term",value:t,onChange:function(e){return n(e.target.value.toLowerCase())}})}),Object($.jsx)(O.a,{className:a.cardActions,children:Object($.jsx)(ve.a,{children:Object($.jsx)(m.a,{className:a.button,onClick:function(){return r(!0)},children:"Create New User Role"})})})]})})},pn=Object(v.a)({card:{verticalAlign:"middle",display:"inline-flex",width:"100%"},cardActionArea:{paddingLeft:"2ch",display:"flex",flexGrow:1,width:"auto"},cardActions:{float:"left"},button:{textTransform:"none",fontSize:"1.25rem",width:"100%",whiteSpace:"nowrap"},typography:{fontSize:"1.25rem"}}),hn=["Unset","None","Viewer","Uploader","Publisher"],xn=function(e){var t=e.accessRoleData,n=pn(),a=Object(l.b)(),c=Object(l.c)((function(e){return e.folders})),i=Object(r.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1];Object(r.useEffect)((function(){if(""===u&&!c.loading){for(var e=t.folder_id,n=0,r="";0!==e;){if(!c.ids.includes(e))return void a(se(t.folder_id));n<3&&(r=(0===c.entities[e].parent_folder_id?"":" / ")+c.entities[e].name+r),e=c.entities[e].parent_folder_id,n++}n>=3&&(r=c.entities[e].name+" / ..."+r),d(r)}}),[c]);return Object($.jsx)(b.a,{item:!0,children:Object($.jsxs)(f.a,{variant:"outlined",square:!0,className:n.card,children:[Object($.jsx)(Y.a,{className:n.cardActionArea,children:Object($.jsxs)(b.a,{container:!0,spacing:2,className:n.grid,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(_e.a,{})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsxs)(Z.a,{className:n.typography,children:[u," (",hn[t.access_level],")"]})})]})}),1===t.id?"":Object($.jsx)(O.a,{className:n.cardActions,children:Object($.jsx)(ve.a,{children:Object($.jsx)(m.a,{className:n.button,onClick:function(){a(an(t))},children:"Remove Access Role"})})})]})})},mn=Object(v.a)({grid:{display:"flex",flexGrow:1,width:"auto",paddingLeft:"1.25rem",paddingTop:"0.5rem"},buttonGroup:{float:"left"},button:{fontSize:"1.25rem",textTransform:"none"},typography:{fontSize:"1.25rem"}}),vn=function(e){var t=e.userRoleData,n=e.openEdit,r=e.openDelete,a=e.openAdd,c=mn();return Object($.jsxs)(Vt.a,{square:!0,children:[Object($.jsxs)(Pt.a,{children:[Object($.jsxs)(b.a,{container:!0,spacing:2,className:c.grid,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(Ot.a,{})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(Z.a,{className:c.typography,children:t.name})})]}),Object($.jsxs)(ve.a,{className:c.buttonGroup,children:[Object($.jsx)(m.a,{className:c.button,onClick:function(e){e.stopPropagation(),a(t)},children:"Create New Access Role"}),Object($.jsx)(m.a,{className:c.button,onClick:function(e){e.stopPropagation(),n(!1,t)},children:"Edit User Role"}),1===t.id?"":Object($.jsx)(m.a,{className:c.button,onClick:function(e){e.stopPropagation(),r(t.id)},children:"Delete User Role"})]})]}),Object($.jsx)(zt.a,{children:Object($.jsx)(b.a,{container:!0,direction:"column",children:t.access_roles.map((function(e){return Object($.jsx)(xn,{accessRoleData:e},e.id)}))})})]})},gn=Object(v.a)({dialogActions:{justifyContent:"center"},grid:{paddingTop:"1rem"},dialogContent:{overflow:"visible"},dialogContentText:{marginTop:"0.5rem",marginBottom:"0"}}),yn=function(e){var t=e.open,n=e.setOpen,a=e.create,c=e.userRoleData,i=Object(l.b)(),o=gn(),u=Object(l.c)((function(e){return e.userRoles})),d=Object(r.useState)(""),j=Object(s.a)(d,2),b=j[0],f=j[1],O=Object(r.useState)(""),h=Object(s.a)(O,2),x=h[0],v=h[1],g=Object(r.useState)(!1),y=Object(s.a)(g,2),C=y[0],w=y[1];return Object(r.useEffect)((function(){C&&!u.loading&&(w(!1),u.error?v(u.error):n(!1))})),Object(r.useEffect)((function(){t&&f(a?"":c.name)}),[t,a,c]),Object($.jsxs)($e.a,{open:t,onClose:function(){return n(!1)},children:[Object($.jsxs)(Qe.a,{className:o.dialogContent,children:[C?Object($.jsx)(ee.a,{}):"",Object($.jsx)(p.a,{autoFocus:!0,label:"name",type:"text",value:b,onChange:function(e){return f(e.target.value)},helperText:x,error:""!==x})]}),Object($.jsxs)(Xe.a,{className:o.dialogActions,children:[Object($.jsxs)(m.a,{onClick:function(){""!==b?(w(!0),i(a?Zt({name:b}):tn({id:c.id,name:b}))):v(V)},children:[a?"Create":"Edit"," User Role"]}),Object($.jsx)(m.a,{color:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})},Cn=function(e){var t=e.open,n=e.onClose,a=e.id,c=Object(l.b)(),i=Object(l.c)((function(e){return e.userRoles})),o=Object(r.useState)(!1),u=Object(s.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(""),f=Object(s.a)(b,2),O=f[0],p=f[1];return Object(r.useEffect)((function(){d&&!i.loading&&(j(!1),i.error?p(i.error):n())}),[i]),Object($.jsxs)($e.a,{open:t,onClose:n,children:[Object($.jsxs)(Qe.a,{children:[d?Object($.jsx)(ee.a,{}):"",Object($.jsx)(et.a,{children:"Are you sure you want to delete this user role?"}),O?Object($.jsx)(tt.a,{children:O}):""]}),Object($.jsxs)(Xe.a,{children:[Object($.jsx)(m.a,{onClick:function(){j(!0),c(nn(a))},children:"Delete User Role"}),Object($.jsx)(m.a,{onClick:n,color:"secondary",children:"Cancel"})]})]})},wn=n(233),_n=Object(v.a)({dialog:{width:"100%",height:"auto"},dialogActions:{justifyContent:"left"},form:{justifyContent:"center"},button:{textTransform:"none","&:disabled":{color:"black"}},formControl:{minWidth:150}}),kn=function(e){var t=e.open,n=e.onClose,a=e.userRoleData,c=_n(),i=Object(l.b)(),o=Object(l.c)((function(e){return e.folders})),u=Object(r.useState)(!1),d=Object(s.a)(u,2),j=d[0],b=d[1],f=Object(r.useState)(null),O=Object(s.a)(f,2),p=O[0],h=O[1],x=Object(r.useState)(""),v=Object(s.a)(x,2),g=v[0],y=v[1],C=function(e){o.ids.includes(e)?h(o.entities[e]):(h({id:e,name:"",child_folders:[]}),b(!0),i(se(e)))};Object(r.useEffect)((function(){t&&C(1)}),[t]),Object(r.useEffect)((function(){j&&!o.loading&&(b(!1),o.error?y(o.error):""!==p.name?n():h(o.entities[p.id]))}),[j,o]);var w=Object(r.useState)(""),_=Object(s.a)(w,2),k=_[0],S=_[1];return Object($.jsxs)($e.a,{open:t,onClose:n,children:[j?Object($.jsx)(ee.a,{}):"",p?Object($.jsxs)("div",{children:[Object($.jsxs)(Xe.a,{className:c.dialogActions,children:[""!==p.name&&0!==p.parent_folder_id?Object($.jsx)(m.a,{className:c.button,onClick:function(){return C(p.parent_folder_id)},children:o.entities[p.parent_folder_id].name}):"",0!==p.parent_folder_id?Object($.jsx)(m.a,{disabled:!0,className:c.button,children:"/"}):"",Object($.jsx)(m.a,{className:c.button,disabled:!0,children:p.name})]}),Object($.jsx)(Qe.a,{children:Object($.jsx)(wn.a,{})}),Object($.jsx)(Xe.a,{className:c.dialogActions,children:Object($.jsx)(bt.a,{children:p.child_folders.map((function(e){return Object($.jsxs)(ye.a,{button:!0,onClick:function(){return C(e.id)},children:[Object($.jsx)(Ce.a,{children:Object($.jsx)(_e.a,{})}),Object($.jsx)(we.a,{primary:e.name})]},e.id)}))})})]}):"",Object($.jsx)(Xe.a,{className:c.form,children:Object($.jsxs)(Dt.a,{className:c.formControl,children:[Object($.jsx)(At.a,{children:"Access Level"}),Object($.jsx)(Rt.a,{value:k,onChange:function(e){return S(e.target.value)},error:""!==g,children:hn.map((function(e,t){return Object($.jsx)(Ut.a,{value:t,children:e},t)}))}),g?Object($.jsx)(Qt.a,{children:g}):""]})}),Object($.jsxs)(Xe.a,{children:[Object($.jsx)(m.a,{onClick:function(){""===k&&y("required access level"),b(!0),i(rn({user_role_id:a.id,folder_id:p.id,access_level:k}))},children:"Add Access Role"}),Object($.jsx)(m.a,{onClick:n,color:"secondary",children:"Cancel"})]})]})},Sn=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.userRoles})),n=Object(r.useState)(!1),a=Object(s.a)(n,2),c=a[0],i=a[1];Object(r.useEffect)((function(){t.loading||(c?i(!1):t.loadedData||(i(!0),e(en(null))))}),[t]);var o=Object(r.useState)(""),u=Object(s.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)([]),f=Object(s.a)(b,2),O=f[0],p=f[1];Object(r.useEffect)((function(){p(Object.values(t.entities).filter((function(e){return e.name.toLowerCase().includes(d)})))}),[d,t]);var h=Object(r.useState)(!1),x=Object(s.a)(h,2),m=x[0],v=x[1],g=Object(r.useState)(null),y=Object(s.a)(g,2),C=y[0],w=y[1],_=Object(r.useState)(!1),k=Object(s.a)(_,2),S=k[0],N=k[1],D=function(e,t){v(e),w(t),N(!0)},A=Object(r.useState)(!1),R=Object(s.a)(A,2),U=R[0],E=R[1],F=Object(r.useState)(null),I=Object(s.a)(F,2),T=I[0],W=I[1],V=function(e){E(!0),W(e)},P=Object(r.useState)(!1),z=Object(s.a)(P,2),L=z[0],q=z[1],G=function(e){w(e),q(!0)};return Object($.jsxs)("div",{children:[Object($.jsx)(yn,{open:S,setOpen:N,create:m,userRoleData:C}),Object($.jsx)(Cn,{open:U,onClose:function(){return E(!1)},id:T}),Object($.jsx)(kn,{open:L,onClose:function(){return q(!1)},userRoleData:C}),Object($.jsx)(On,{searchTerm:d,setSearchTerm:j,openEdit:D}),O.map((function(e){return Object($.jsx)(vn,{userRoleData:e,openEdit:D,openDelete:V,openAdd:G},e.id)}))]})},Nn=Object(v.a)({card:{width:"fit-content"},cardActions:{justifyContent:"center"}}),Dn=function(){var e=Nn(),t=Object(l.c)((function(e){return e.auth})),n=Object(r.useState)(!1),a=Object(s.a)(n,2),c=a[0],i=a[1];return Object($.jsxs)("div",{children:[Object($.jsx)(Ht,{open:c,onClose:function(){i(!1)},id:t.userData.id}),Object($.jsxs)(f.a,{elevation:6,className:e.card,children:[Object($.jsxs)(Y.a,{children:[Object($.jsx)(Z.a,{align:"center",variant:"h5",children:"Profile"}),Object($.jsx)(at,{userData:t.userData})]}),Object($.jsx)(O.a,{className:e.cardActions,children:Object($.jsx)(m.a,{onClick:function(){return i(!0)},children:"Change Password"})})]})]})},An=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.folders}));Object(r.useEffect)((function(){t.ids.includes(1)||t.loading||t.error||e(se(1))}),[t]);return 0===t.updates.length?"":Object($.jsxs)(f.a,{children:[Object($.jsx)(Y.a,{children:Object($.jsx)(Z.a,{variant:"h5",children:"Recent Updates"})}),Object($.jsx)(O.a,{children:Object($.jsx)(bt.a,{children:t.updates.map((function(e){return Object($.jsx)(Ge,{update:e},e.id)}))})})]})},Rn=Object(v.a)({grid:{padding:"1rem",width:"fit-content"}}),Un=function(){var e=Rn();return Object($.jsxs)(b.a,{container:!0,className:e.grid,spacing:2,children:[Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(Dn,{})}),Object($.jsx)(b.a,{item:!0,children:Object($.jsx)(An,{})})]})},En=Object(o.a)(),Fn=function(){var e=Object(l.c)((function(e){return e.auth})),t=Object(l.c)((function(e){return e.folders})),n=Object(l.c)((function(e){return e.users})),a=Object(l.c)((function(e){return e.userRoles})),c=Object(l.b)(),o=Object(r.useState)(!1),d=Object(s.a)(o,2),j=d[0],b=d[1],f=function(){e.isAuthenticated&&b(!j)};return Object(r.useEffect)((function(){e.loadStatus||c(J())}),[e]),Object(r.useEffect)((function(){t.error!==W&&n.error!==W&&a.error!==W||(c(M()),c(pe()),c(We()),c(sn()))}),[t,n,a]),Object($.jsx)(i.c,{history:En,children:Object($.jsxs)("div",{className:"App",children:[Object($.jsx)(dt,{toggleNavDrawer:f}),Object($.jsx)(vt,{open:j,onClose:f}),Object($.jsxs)("main",{children:[Object($.jsx)(u.a,{}),Object($.jsxs)(i.d,{children:[Object($.jsx)(i.b,{exact:!0,path:"/login",component:X}),Object($.jsx)(Ct,{exact:!0,path:"/",component:Un}),Object($.jsx)(Ct,{exact:!0,path:"/folders/:id",component:ot}),Object($.jsx)(Ct,{exact:!0,path:"/users",component:bn}),Object($.jsx)(Ct,{exact:!0,path:"/user-roles",component:Sn})]})]})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var In=Object(C.a)({reducer:{auth:G,folders:xe,users:Ve,userRoles:on}});c.a.render(Object($.jsx)(ge.a,{children:Object($.jsx)(l.a,{store:In,children:Object($.jsx)(Fn,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[149,1,2]]]);
//# sourceMappingURL=main.522a8a4c.chunk.js.map